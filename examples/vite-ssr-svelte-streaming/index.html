<!DOCTYPE html>
<html>
  <head>
    <style>
      * { box-sizing: border-box; margin: 0; padding: 0; }
      body { font-family: system-ui, -apple-system, sans-serif; background: #0a0a0a; color: #e5e5e5; line-height: 1.5; }

      /* Layout */
      .app { min-height: 100vh; display: flex; flex-direction: column; }
      .main-layout { display: grid; grid-template-columns: 220px 1fr; flex: 1; }
      .content { padding: 20px; max-width: 1200px; }

      /* Header */
      .site-header { display: flex; align-items: center; justify-content: space-between; padding: 15px 25px; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-bottom: 1px solid #333; }
      .logo { font-size: 1.4em; font-weight: bold; color: #fff; }
      .nav-links { display: flex; gap: 25px; }
      .nav-links a { color: #aaa; text-decoration: none; transition: color 0.2s; }
      .nav-links a:hover { color: #fff; }
      .user-area { display: flex; gap: 20px; align-items: center; }
      .cart, .user { color: #ccc; }

      /* Sidebar */
      .sidebar { background: #111; padding: 20px; border-right: 1px solid #222; }
      .sidebar h3 { color: #fff; margin-bottom: 15px; font-size: 1.1em; }
      .sidebar h4 { color: #888; margin: 20px 0 10px; font-size: 0.85em; text-transform: uppercase; }
      .sidebar ul { list-style: none; }
      .sidebar li { margin: 8px 0; }
      .sidebar a { color: #aaa; text-decoration: none; transition: color 0.2s; }
      .sidebar a:hover { color: #4ade80; }
      .filters { margin-top: 25px; padding-top: 20px; border-top: 1px solid #222; }
      .price-range, .stars { color: #666; font-size: 0.9em; }

      /* Hero Banner */
      .hero-banner { background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); padding: 50px 40px; border-radius: 12px; margin-bottom: 30px; text-align: center; }
      .hero-banner h1 { font-size: 2.5em; color: #fff; margin-bottom: 10px; }
      .hero-banner p { color: rgba(255,255,255,0.9); font-size: 1.2em; margin-bottom: 20px; }
      .cta-button { background: #fff; color: #4f46e5; border: none; padding: 12px 30px; border-radius: 8px; font-size: 1em; font-weight: 600; cursor: pointer; transition: transform 0.2s; }
      .cta-button:hover { transform: scale(1.05); }

      /* Products */
      .products-section h2 { color: #fff; margin-bottom: 20px; }
      .product-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
      .product-card { background: #161616; border: 1px solid #222; border-radius: 10px; padding: 20px; transition: transform 0.2s, border-color 0.2s; animation: cardIn 0.4s ease-out; }
      .product-card:hover { transform: translateY(-5px); border-color: #4f46e5; }
      .product-image { font-size: 3em; text-align: center; margin-bottom: 15px; }
      .product-card h4 { color: #fff; margin-bottom: 8px; }
      .product-rating { color: #fbbf24; font-size: 0.9em; margin-bottom: 8px; }
      .product-price { color: #4ade80; font-size: 1.3em; font-weight: bold; margin-bottom: 15px; }
      .add-to-cart { width: 100%; background: #4f46e5; color: #fff; border: none; padding: 10px; border-radius: 6px; cursor: pointer; transition: background 0.2s; }
      .add-to-cart:hover { background: #6366f1; }

      /* Reviews */
      .reviews-section { background: #111; border-radius: 10px; padding: 25px; margin-bottom: 25px; animation: cardIn 0.4s ease-out; }
      .reviews-section h3 { color: #fff; margin-bottom: 15px; }
      .avg-rating { color: #fbbf24; margin-bottom: 20px; font-size: 1.1em; }
      .review { background: #1a1a1a; padding: 15px; border-radius: 8px; margin-bottom: 12px; }
      .review-header { display: flex; gap: 15px; align-items: center; margin-bottom: 8px; }
      .review-header strong { color: #fff; }
      .review-rating { color: #fbbf24; }
      .review-date { color: #666; font-size: 0.85em; }
      .review p { color: #aaa; }

      /* Newsletter */
      .newsletter { background: linear-gradient(135deg, #065f46 0%, #047857 100%); border-radius: 10px; padding: 30px; text-align: center; animation: cardIn 0.4s ease-out; }
      .newsletter h3 { color: #fff; margin-bottom: 10px; font-size: 1.3em; }
      .newsletter p { color: rgba(255,255,255,0.9); margin-bottom: 20px; }
      .newsletter-form { display: flex; gap: 10px; justify-content: center; }
      .newsletter-form input { padding: 12px 20px; border-radius: 6px; border: none; width: 300px; }
      .newsletter-form button { background: #fff; color: #047857; border: none; padding: 12px 25px; border-radius: 6px; font-weight: 600; cursor: pointer; }

      /* Footer */
      .site-footer { background: #111; padding: 20px; text-align: center; color: #666; border-top: 1px solid #222; margin-top: auto; }

      /* Page Navigation */
      .page-nav { display: flex; gap: 15px; margin-bottom: 25px; padding: 15px 0; border-bottom: 1px solid #222; }
      .nav-link { color: #888; text-decoration: none; padding: 8px 16px; border-radius: 6px; transition: all 0.2s; }
      .nav-link:hover { color: #fff; background: #222; }
      .nav-link.active { color: #4ade80; background: #1a2e1a; }

      /* About Page */
      .about-content { max-width: 900px; margin: 0 auto; padding: 30px; }
      .about-hero { text-align: center; margin-bottom: 50px; }
      .about-hero h1 { font-size: 2.5em; color: #fff; margin-bottom: 15px; }
      .about-hero p { color: #888; font-size: 1.2em; }
      .team-section, .stats-section { margin-bottom: 50px; animation: cardIn 0.4s ease-out; }
      .team-section h2, .stats-section h2 { color: #fff; margin-bottom: 25px; text-align: center; }
      .team-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; }
      .team-card { background: #161616; border: 1px solid #222; border-radius: 12px; padding: 30px; text-align: center; }
      .team-avatar { font-size: 3em; margin-bottom: 15px; }
      .team-card h3 { color: #fff; margin-bottom: 5px; }
      .team-card p { color: #888; }
      .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; }
      .stat-card { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: 12px; padding: 40px; text-align: center; }
      .stat-number { display: block; font-size: 2.5em; font-weight: bold; color: #4ade80; margin-bottom: 10px; }
      .stat-label { color: #888; font-size: 1.1em; }

      /* Stream Progress Bar */
      .stream-progress { position: fixed; top: 0; left: 0; right: 0; height: 3px; background: #1a1a1a; z-index: 9999; }
      .stream-progress::after { content: ''; position: absolute; left: 0; top: 0; height: 100%; width: 0%; background: linear-gradient(90deg, #4f46e5, #7c3aed, #4ade80); transition: width 0.3s ease-out; }

      /* Skeletons */
      .skeleton { background: linear-gradient(90deg, #1a1a1a 0%, #252525 50%, #1a1a1a 100%); background-size: 200% 100%; animation: shimmer 1.5s infinite; border-radius: 8px; color: #444; display: flex; align-items: center; justify-content: center; }

      @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
      @keyframes cardIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

      /* Stream Timeline */
      #stream-log { position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); padding: 15px; border-radius: 10px; font-size: 11px; font-family: 'SF Mono', Monaco, monospace; width: 280px; z-index: 1000; border: 1px solid #333; max-height: 50vh; overflow-y: auto; }
      #stream-log h3 { margin: 0 0 10px; color: #4ade80; font-size: 13px; display: flex; align-items: center; gap: 8px; }
      .log-entry { padding: 4px 0; border-bottom: 1px solid #222; display: flex; gap: 10px; }
      .log-entry:last-child { border: none; }
      .log-time { color: #666; min-width: 45px; }
      .log-msg { flex: 1; }

      /* Head Updates */
      #head-updates { position: fixed; bottom: 10px; right: 10px; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); padding: 15px; border-radius: 10px; font-size: 10px; font-family: 'SF Mono', Monaco, monospace; width: 280px; max-height: 200px; overflow-y: auto; border: 1px solid #333; }
      #head-updates h3 { margin: 0 0 10px; color: #06b6d4; font-size: 12px; }
      .head-entry { color: #666; padding: 3px 0; display: flex; gap: 10px; border-bottom: 1px solid #222; }
      .head-entry:last-child { border: none; }
      .head-time { color: #666; min-width: 40px; }
      .head-desc { flex: 1; }
      .head-entry.new { color: #4ade80; animation: flash 0.5s; }
      .head-entry.new .head-time { color: #4ade80; }
      @keyframes flash { from { background: rgba(74,222,128,0.2); } to { background: transparent; } }
    </style>
    <script>
      // Must be defined early so bootstrap script can use __headLog
      const start = Date.now();
      const seen = new Set();

      window.__streamLog = (name, color = '#4ade80') => {
        if (seen.has(name)) return;
        seen.add(name);
        const el = document.createElement('div');
        el.className = 'log-entry';
        el.innerHTML = `<span class="log-time">${((Date.now() - start) / 1000).toFixed(2)}s</span><span class="log-msg" style="color:${color}">${name}</span>`;
        document.getElementById('log-entries')?.appendChild(el);
      };

      window.__headLog = (desc) => {
        const el = document.createElement('div');
        el.className = 'head-entry new';
        el.innerHTML = `<span class="head-time">${((Date.now() - start) / 1000).toFixed(2)}s</span><span class="head-desc">${desc}</span>`;
        document.getElementById('head-entries')?.appendChild(el);
        setTimeout(() => el.classList.remove('new'), 500);
      };
    </script>
  </head>
  <body>
    <div id="stream-log">
      <h3><span style="animation: pulse 1s infinite;">*</span> Stream Timeline</h3>
      <div id="log-entries"></div>
    </div>
    <div id="head-updates">
      <h3>Head Updates</h3>
      <div id="head-entries"></div>
    </div>
    <div id="app"><!--app-html--></div>
    <script>
      window.__streamLog('Initial HTML', '#fff');
    </script>
    <script type="module" src="/src/entry-client.ts"></script>
  </body>
</html>
